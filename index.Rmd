---
title: "Version Control with Git and GitHub"
author: 
  - "Manuel Alcala Kovalski"
date: '`r Sys.Date()`'
output:
  xaringan::moon_reader:
    css: ["remark.css",  "my-theme.css",xaringan-themer.css]
    nature:
      slideNumberFormat: "%current%"
      highlightStyle: github
      highlightLines: true
      ratio: 16:9
      countIncrementalSlides: true
---

```{r setup, include=FALSE}
library('knitr')
librarian::shelf(tidyverse, ggbrookings, palmerpenguins, magick)
old.hooks <- fansi::set_knit_hooks(knitr::knit_hooks)
options(
  htmltools.dir.version = FALSE,
  htmltools.preserve.raw = FALSE,
  tibble.width = 60,
  tibble.print_min = 6,
  crayon.enabled = TRUE
)
opts_chunk$set(
  echo = TRUE,
  warning = FALSE,
  message = FALSE,
  comment = "#>",
  fig.path = 'figure/',
  cache.path = 'cache/',
  cache = TRUE,
  fig.retina = 3,
  fig.align = 'center',
  fig.show = 'hold',
  dpi = 120,
  eval = FALSE
)
```

```{r xaringan-themer, include=FALSE, warning=FALSE}
library(xaringanthemer)
style_duo_accent(
  primary_color = "#003A79",
  secondary_color = "#003a79",
  inverse_header_color = "#FAFAFA"
)
xaringanExtra::use_tile_view()
xaringanExtra::use_share_again()
xaringanExtra::use_panelset()


xaringanExtra::use_tachyons()
xaringanExtra::use_clipboard()
xaringanExtra::use_fit_screen()
xaringanExtra::use_extra_styles(
  hover_code_line = TRUE,
  mute_unhighlighted_code = TRUE
)
```


# Has this ever happened to you?
```{r, eval=TRUE, echo = FALSE, out.height = '550px', out.width='550px'}
knitr::include_graphics('images/what-is-version-control.gif')
```




???
ou know that great paper you just wrote, you were done with it, so you called it “final”. And then, you sent it to your advisor for her last comments. So you renamed it “final_thisone”. A few days passed, and you realized there was a typo in your figure, and you renamed it “final_thisone_really”. A couple of weeks pass, you get comments back from the reviewer, you start changing it and you renamed your file “final_submitted”. And then… your advisor think you should rewrite the conclusion and the file become “final_submitted_really”.

A year pass, you are mentoring a new undergrad in the lab, and she asks you for your final document so she can look at your methods… You open your folder, and mesmerized by the number of final labelled final, you forget which one if the correct one. Sounds familiar?

---

# Enter Git/GitHub 

+ Git and GitHub allow for easy management and sharing of data analytic content

```{r, eval=TRUE, echo = FALSE, out.height = '450px', out.width='500px'}
knitr::include_graphics('images/git-management.png')
```

---

#Ok, so what is Git/GitHub? 

+ Just software!
 > Git is an application that runs on your computer, like a web brower or a word processor  - [Tom Stuart](https://r-pkgs.org/index.html)
+ GitHub is also a collaboration tool and an ecosystem of version controlled projects (repositories)


---

# Sure, but how are Git/GitHub related?


.pull-left[
```{r, eval=TRUE, echo = FALSE, out.height = '200px', out.width='350px'}
knitr::include_graphics('images/git-logo.png')
```

+ Git is the command line software that handles version control on your repository
+ When you use GitHub, Git is always doing its things behind the scenes

]

.pull-right[
```{r, eval=TRUE, echo = FALSE, out.height = '200px'}
knitr::include_graphics('images/github-logo.png')
```

+ GitHub is a service that hosts your repository online and helps you work with collaborators
+ It's a web interface for version control 
+ Most often you will interface with GitHub with the command line, GitHub Desktop App, or RStudio.
]

---

class: center, middle, inverse, title-slide-ggbrookings
# Terms you should know 

---

# Version control

+ A system for tracking changes (or versions) of anything (document, file, image, etc) 
+ Version control allows you to **time-travel**

---

# Repository (Repo)

+ This is where all your project files live
+ You can use Git to take snapshots (version control) of all the files in a folder
+ With GitHub your repo con live on your computer and on the web

```{r, eval=TRUE, echo = FALSE, out.height='400px'}
knitr::include_graphics('images/git-brownbag-repo.png')
```
---

# Remote

+ You should always back up your work, ideally somewhere different than your local drive. 
+ In _Git_, this place is called the __remote repository__
+ _GitHub_ is just a very popular remote
+ Some alternative remotes are:
  + [Bitbucket](https://bitbucket.org)
  + [GitLab](https://about.gitlab.com)
 
---

# Cloning

+ To get some work from a remote for the first time you need to __clone__ it!
```{r, eval=TRUE, echo = FALSE}
knitr::include_graphics('images/cloning.png')
```


---


# Commit

+ When you want to take a snapshot of a file or files, you create a **commit**
+ A commit is equivalent to saving a version of a file(s)
+ Every time you make a commit, you are leaving a breadcrumb of those files to come back to
+ Git allows you to **tell the story of your project** by tracking changes through commit messages.


```{r, eval=TRUE, echo = FALSE, out.height = '300px'}
knitr::include_graphics('images/commits-iris.png')
```


---

class: center, middle, inverse, title-slide-ggbrookings
# Collaborating with Git/GitHub

---
# You'll never _work_ alone 

+ As the __owner__ of a repo you can:
  + Add collaborators
  + Each collaborator can __read/write files__ in the repo, create __branches__, and __merge__ changes directly
  
  
```{r, eval=TRUE, echo = FALSE, out.height = '300px'}
knitr::include_graphics('images/contributors.png')
```

---

# Getting everyone on the same page

.pull-left[
+ You can **fetch** changes to the repo on GitHub (the **remote repository**) to see if any modified files are not on your computer
+ If you want those changes to take effect on your computer you can **pull** them from the remote repository on GitHub
+ If *you* make a commit that you want others to pull, then you need to *push* it to the remote repository
]
.pull-right[

```{r, eval=TRUE, echo = FALSE}
knitr::include_graphics('images/fetch-v-pull.jpeg')
```

]

---

# But what about me???

+ If you want others to see the changes *you've* made, you can **push** those commits to GitHub.
```{r, eval=TRUE, echo = FALSE, out.height = '300px'}
knitr::include_graphics('images/collaboration.png')
```

---

# Forking & Pull Requests

.pull-left[
+ It would be scary if anyone could _make_ changes to your project files
+ However, anyone can __*suggest*__ changes 
+ __Forking__ allows you to work on a _copy_ of a repo you're not an official contributor to
+ Once you're done with your __suggested__ changes you can make a __pull request__
+ The owner of the repo will determine if your changes are cool and __merge__ them in
+ __Pull requests__ allow you to collaborate on all public projects on GitHub
]


.pull-right[
```{r, eval=TRUE, echo = FALSE }
knitr::include_graphics('images/pull-request.png')
```
]

---

# Issues

+ You can also submit issues if you’re having trouble with software

```{r, eval=TRUE, echo = FALSE }
knitr::include_graphics('images/tidyverse-issues.png')
```

---
# Help me help you

+ If you use __`{ggbrookings}`__ and are having trouble or if you've found a bug, please submit an issue
+ If you have a question or are running into a problem, it's likely other people are too. 
+ Posting an issue gives me an opportunity to respond to these issues in a public forum that others can benefit from too!


---

class: center, middle, inverse, title-slide-ggbrookings
# Git and GitHub let you experiment

---
# Parallel Universes
+ Everything we've covered so far has been very linear
+ This is usually not how research work, often you want to experiment with easily discardable changes
+ You can do this in Git with __branches__
+ You can use __branches__ when working as a team or on a new feature


```{r, eval=TRUE, echo = FALSE, out.height = '350px'}
knitr::include_graphics('images/fim-branch.png')
```


---
# Parallel Universes
.pull-left[
+ The default branch is called the __master__ branch
]
.pull-left[

```{r, eval=TRUE, echo = FALSE, out.height = '400px'}
knitr::include_graphics('images/master-branch.png')
```

]

---
# Parallel Universes
.pull-left[
+ The default branch is called the __master__ branch
+ You can add your own branches too
]
.pull-left[
<br><br>
```{r, eval=TRUE, echo = FALSE}
knitr::include_graphics('images/feature-branch.png')
```

]

---
# Parallel Universes
.pull-left[
+ The default branch is called the __master__ branch
+ You can add your own branches too
+ You'll often do a lot of work on a branch
]
.pull-left[
<br><br><br><br>
```{r, eval=TRUE, echo = FALSE}
knitr::include_graphics('images/wild-experiment-branch.png')
```
]
---

class: center, middle, inverse, title-slide-ggbrookings

## Branches are useful for trying out stuff since they're really easy to throw away if you decide against your changes

---

class: center, middle, inverse, title-slide-ggbrookings

## It's common for the master branch to be what you have published or finalized whereas other branches can contain work in progress

---

# Merging your changes  

.pull-left[
+ Once you finish your work on a branch, you'll want to get it back into the master branch
+ To get changes from one branch into another, you __merge__ them
+ __Merges__ help manage combining your work with someone else's
]
.pull-right[
 ```{r, eval=TRUE, echo = FALSE}
knitr::include_graphics('images/merge.png')
```
]

---

# References


TBD





